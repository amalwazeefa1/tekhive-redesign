<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="sample.css">
</head>

<body>
    <div class="carousel" aria-label="Card carousel">
        <div class="track">
            <article class="card">Card 1</article>
            <article class="card">Card 2</article>
            <article class="card">Card 3</article>
            <article class="card">Card 4</article>
        </div>
    </div>

    <script>
        const track = document.querySelector('.track');
const cards = Array.from(track.children);

let isDown = false;
let startX = 0;
let startScroll = 0;

track.addEventListener('pointerdown', (e) => {
  isDown = true;
  track.setPointerCapture(e.pointerId);
  startX = e.clientX;
  startScroll = track.scrollLeft;
  track.style.scrollSnapType = 'none'; // temporarily disable snap while dragging
  track.style.cursor = 'grabbing';
});

track.addEventListener('pointermove', (e) => {
  if (!isDown) return;
  const dx = e.clientX - startX;
  track.scrollLeft = startScroll - dx;
});

track.addEventListener('pointerup', (e) => {
  isDown = false;
  track.style.cursor = '';
  // Snap to the nearest card center
  const trackRect = track.getBoundingClientRect();
  const trackCenter = track.scrollLeft + trackRect.width / 2;

  let nearest = cards[0];
  let nearestDist = Infinity;

  for (const card of cards) {
    const rect = card.getBoundingClientRect();
    const cardCenter = track.scrollLeft + rect.left + rect.width / 2 - trackRect.left;
    const dist = Math.abs(cardCenter - trackCenter);
    if (dist < nearestDist) {
      nearest = card;
      nearestDist = dist;
    }
  }

  // Smoothly scroll to that card
  nearest.scrollIntoView({ inline: 'center', behavior: 'smooth', block: 'nearest' });
  // Re-enable snap after the smooth scroll finishes (approx)
  setTimeout(() => (track.style.scrollSnapType = 'x mandatory'), 300);
});

track.addEventListener('pointercancel', () => {
  isDown = false;
  track.style.cursor = '';
  track.style.scrollSnapType = 'x mandatory';
});

    </script>
</body>

</html>